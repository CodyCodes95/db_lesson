<%= form_with(model: @book) do |f| %>
<fieldset class="mb-2">
    <%= f.label :title %>
    <%= f.text_field :title %>
</fieldset>
<fieldset class="mb-2">
    <%= f.label :author_id %>
    <%# collection_select takes 5 params:
    1. the attribute name in this model (book) to store the ID in
    2. The collection from which to build the options (@authors)
    3. The attribute in the collection items to use as the value of the option
    4. The attribute in the collection items to use as the caption of the option %>
    <%= f.collection_select :author_id, @authors, :id, :full_name %>
</fieldset>
<fieldset class="mb-2">
    <%= f.label :cover %>
    <%= f.file_field :cover %>
</fieldset>
<% if @book.cover.attached? %>
<fieldset class="mb-2">
    <%= cl_image_tag @book.cover.key, transformation: ["media_lib_thumb"], cloud_name: 'codycodes' %>
</fieldset>
<%end%>
<fieldset>
    <%= f.submit class: 'btn btn-outline-primary' %>
</fieldset>
<% end %>